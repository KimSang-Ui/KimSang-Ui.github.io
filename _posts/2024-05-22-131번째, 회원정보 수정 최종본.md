<center>회원정보 수정 코드 최종본</center>

    @PutMapping(value = "update")// 회원정보 수정
    @SecurityRequirement(name = "bearerAuth")
    public ResponseEntity<String> updateUser(@Valid @RequestBody UserUpdate userUpdate) {
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        System.out.println(authentication.getPrincipal());
        User user = (User) authentication.getPrincipal();
        System.out.println(user.getEmail());
        String email = user.getEmail();
        String returnvalue = userService.updateUser(email, userUpdate);
        return ResponseEntity.status(HttpStatus.OK).body(returnvalue);
    }//controller

     public String updateUser(String email, UserUpdate userUpdate) {
        User dbUser = userRepository.findByEmail(email);
        User phoneUser = userRepository.findByPhone(userUpdate.getPhone());

        System.out.println(encoder.encode(userUpdate.getPassword()));

        if (dbUser == null) {
            throw new BizException(NOTFOUNDUSER);
            // 해당 회원이 없을때 에러코드
        }
        if (phoneUser != null && dbUser.getEmail() == phoneUser.getEmail()) {
            dbUser.setNickname(userUpdate.getNickname());
            dbUser.setAddress(userUpdate.getAddress());
            dbUser.setAddress2(userUpdate.getAddress2());
            userRepository.save(dbUser);
        } else if (phoneUser != null && userUpdate.getPhone().equals(phoneUser.getPhone())) {
            throw new BizException(DUPLPHONE); 
            // 휴대전화번호 중복 에러코드
        }
         else {
            dbUser.setNickname(userUpdate.getNickname());
            dbUser.setPhone(userUpdate.getPhone());
            dbUser.setAddress(userUpdate.getAddress());
            dbUser.setAddress2(userUpdate.getAddress2());
            userRepository.save(dbUser);
        }
        System.out.println(dbUser);
        return "회원정보가 수정되었습니다";
    } // service